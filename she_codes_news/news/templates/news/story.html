{% extends "base.html" %}
{% comment %} INDIVIDUAL STORY VIEW {% endcomment %}
{% comment %} INDIVIDUAL STORY VIEW {% endcomment %}

{% load static %}

{% block stylesheets %}

<link rel="stylesheet" type="text/css" href="{% static 'news/news.css' %}">
{% endblock %}
{% block content %}
{% comment %} currentuser: {{ user.id }}
post author: {{ story.author }} {% endcomment %}

<div id="story-wrapper">
    <h2>{{ story.title }}</h2>
    <h4><a href="{% url 'users:profile' story.author.id %}" > Written by {{ story.author }} </a></h4>
    {% comment %} <h4>Posted... {{ story.pub_date }}</h4> - <a href="{% url 'editStory' %}">(edit)</a> {% endcomment %}
    <div id="story-content">
        {% if position < 5 %}
{% comment %} this adds the picture from the URL, if the url is broken, it will grab a picture from the repository randomly {% endcomment %}
            <img src="../static/news/images/placeholder-{{ position }}.jpg">
        {% else %}
            <img src={{story.image_url}}>
        {% endif %}
        {% comment %} <img src="{% static '/news/images/placeholder-5.jpg' %}"> {% endcomment %}
        {{ story.content|linebreaks }}
    </div>

{% if user.is_authenticated %}

<div id="comment-wrapper">
    <div id="form_2_columns">
        <h4>Add a comment</h4>
        <table>
            <form method="post">
            {% csrf_token %}
            {{ form.as_table }}         
        </table>
        <br></br>
        <input class="" type="submit" value="submit">
    </div>
    {% comment %} <div>

        <form method="POST" action="{% url 'news:deleteStory' story.id %}">
            {% csrf_token %}
            {{ form.as_table }}
            <button type="submit">Delete Story</button>
        </form> 
    </div> 

    <div>

        <form method="POST" action="{% url 'news:editStory' story.id %}">
            {% csrf_token %}
            {{ form.as_table }}
            <button type="submit">Edit Story</button>
        </form> 
    </div>  {% endcomment %}
        

{% else %}
    {% comment %} <p><a href="{% url 'news:addComment' story.id %}">Add comment</a></p> {% endcomment %}
    <br></br>
    <ul>
        <p>Please <a href="{% url 'login' %}">Login |</a> <a href="{% url 'users:createAccount' %}">Create Account</a> to comment...</p>
        <br></br>
    {% for comment in story.comments.all %}
        <li>{{comment.author.username}} ({{comment.created_at}}):{{ comment.content }}</li>
    {% endfor %}
    </ul>
{% endif %}
</div>

{% endblock %}

